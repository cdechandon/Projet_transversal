C51 COMPILER V9.52.0.0   CONFIG_INITIALE                                                   04/04/2018 12:10:06 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE CONFIG_INITIALE
OBJECT MODULE PLACED IN Config_Initiale.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE Config_Initiale.c BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          #include <c8051f020.h>                    // SFR declarations
   2          #include <intrins.h>   
   3          #include "Config_Initiale.h"
   4          //------------------------------------------------------------------------------
   5          
   6          
   7          //*****************************************************************************
   8          //FONCTIONS de Configuration globale du C8051F020 - 
   9          //*****************************************************************************
  10          
  11          SYSCLK=22118400;
  12          
  13          void Init_Device(void)
  14          {
  15   1        Reset_Sources_Init();
  16   1        Oscillator_Init();
  17   1        Config_XBAR();
  18   1        // EMI_Init();
  19   1        // Power_Control();
  20   1      }
  21          
  22          void Reset_Sources_Init(void)
  23          {
  24   1        EA=0;
  25   1        WDTCN=0xDE;
  26   1        WDTCN=0xAD;
  27   1        EA=1;
  28   1      }
  29          
  30          void Oscillator_Init(void)
  31          {
  32   1        int i=0;
  33   1        OSCXCN=0x67;
  34   1        for(i=0;i<3000;i++);
  35   1        while ((OSCXCN & 0x80) ==0);
  36   1        OSCICN = 0x0C;
  37   1      }
  38          
  39            void Config_Timer2()
  40            {
  41   1          ET2 = 1;
  42   1          TF2 = 1;
  43   1          TR2 = 1;
  44   1          RCAP2L = 0xED; 
  45   1          RCAP2H = 0xB7;
  46   1          
  47   1        }
  48            
  49            void Config_XBAR()
  50            {
  51   1          XBR2|= 0x40;
  52   1          XBR1 |= 0x80;
  53   1          P0MDOUT |= 0x05;
  54   1          XBR0 |= 0x08;
  55   1          P0 &= 0x00;
C51 COMPILER V9.52.0.0   CONFIG_INITIALE                                                   04/04/2018 12:10:06 PAGE 2   

  56   1          
  57   1        }
  58          
  59          void Init_PCA(void)
  60            {
  61   1        
  62   1          CR=1;
  63   1          //PCA0CN |= 0x40;  // desactivation du PCA
  64   1          PCA0MD |= 0x09;  // base temps = SYSCLK
  65   1          PCA0CPM0 |= 0xC2;  // mode PCA : modulation de l'impulsion 8-bits
  66   1            
  67   1        }
  68          
  69          
  70          void PCA(unsigned char Intensite)
  71            { 
  72   1          int Quantite_lumiere;
  73   1          Quantite_lumiere = 255*Intensite /100 ;
  74   1          
  75   1          PCA0CPH0 = 255 - (char)Quantite_lumiere;
  76   1          PCA0CN |= 0x41; 
  77   1              
  78   1          
  79   1        }
  80            
  81              
  82          
  83            


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    109    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
